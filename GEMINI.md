1. 让用户判断是否要查看电话；程序启动时询问是否需要重新登录/更新Cookie (state.json)。
2. **新增**: 程序启动时询问是否清空 `data`, `resumes`, `zips` 文件夹下的所有内容。
3. 用户输入是否要求姓名只保留首字母缩写+先生/女士 (例如: Z先生)
3. 用户可输入筛选条件：
    a. 离职年限不早于 (格式: YY/M 或 'Present', 默认: Present)
    b. 最后一次登陆时间不晚于 (格式: YYYY/MM/DD, 默认: 空)
4. 用户首先输入一个“分类”（如：上游），然后输入一个或多个用“/”分隔的公司名称及期望收集的合格简历份数（格式：公司A 10/公司B 5）。
   - **新增**: 用户可输入多个用“/”分隔的职位（如：产品经理/数据分析师）。程序将为每个公司依次搜索这些职位，直到达到该公司的配额。
5. 生成的表格列：序号；分类；公司；姓名；在职公司；职位；云号码；在职时间；Profile（内容为AI总结：优先展示目标公司经历，格式为“在职时间 公司 岗位”，换行后为一句话总结；再换行后罗列其他公司的“在职时间 公司 岗位”）；简历链接；是否合作；最后一次登录时间
   - **新增功能**: 
     - 搜索到符合关键词的简历后，直接将网页保存为docx文件（包含网页格式），命名规则：“序号-猎聘-X先生/女士.docx”。若重名则自动添加序号。
     - 同一个公司的搜索完成后，将该公司的所有docx文件打包为一个zip文件，命名规则：“猎聘-[公司名]-[X]份-[用户输入标识].zip”。
     - 生成的Excel表格将按“公司”列进行排序。
     - **文件保存路径**:
       - 简历文档 (.docx) -> `./resumes/`
       - 数据表格 (.xlsx) -> `./data/`
       - 压缩包 (.zip) -> `./zips/`
6. 筛选简历时，将按以下顺序检查，任一不符则跳过：
    a. “最后一次登录时间”是否晚于用户设定的时间。
    b. 候选人离职时间是否晚于用户设定的“最早离职年限”。
    c. **早停机制**: 如果连续 10 份简历都不符合要求（登录时间、离职时间或AI不匹配），则停止当前职位的搜索，进入下一个职位或公司。
7. 每次对话后，自动判断是否有必要的新信息（如新增功能、修改的逻辑等）需要更新到此文档中。
8. 每当 main.py 发生变化时，就请自动同步到GitHub并且自动加上每次版本更新了些什么。

## 版本更新记录
- **2025-11-26**: 
    1. 新增启动时询问是否更新登录状态 (state.json)。
    2. 支持输入多个职位 (用 '/' 分隔)，程序将依次搜索直到满足公司配额。
    3. 简历保存格式从 docx 改为 html，后又改回 docx (增强格式保留)。
    4. 最终生成的 Excel 表格按公司名称排序。
    5. 默认开启无头模式 (Headless Mode)，浏览器在后台运行，不干扰用户。
    8. **Terminal 优化**: 
        - 引入 `rich` 库，实现彩色日志、进度条和表格展示。
        - 新增输入回退功能：在配置阶段输入 `b` 或 `back` 可返回上一步修改输入。
        - 进度条新增实时显示 (合格/已看) 数量。
        - 修改输入提示：离职年限默认为 Present，压缩包标识默认为 ZTZ。
    9. 优化文件输出结构，分别存入 resumes, data, zips 文件夹。
    10. 新增早停机制 (Early Stopping)，连续 10 次不匹配则跳过当前职位。
    11. **发布支持**: 新增 `build_mac.sh` 和 `BUILD.md`，支持使用 PyInstaller 打包为独立可执行文件 (Mac/Win)。程序启动时会自动检测并安装浏览器环境。
- **2025-11-28**:
    1. 修改目标职位输入逻辑：若未输入职位，则不再默认为“产品经理”，而是为空（即不限制职位）。
    2. 修改zip文件命名逻辑：用户可自定义zip文件名中的标识部分（原固定为'DJH'），默认为'DJH'。
    3. 优化zip命名规则：在文件名中增加公司名称，格式改为“猎聘-[公司名]-[X]份-[标识].zip”，以便区分不同公司的压缩包。
    4. 新增启动时询问是否一键清空 `data`, `resumes`, `zips` 文件夹内容的功能。
    5. 修复日期比较逻辑：使用 `datetime` 对象替代字符串比较，支持智能解析 "YY/M" 等格式（如 "25/1" -> "2025/01/01"）。
- **2025-12-05**:
    1. **文件归档**: 启动时选择不清空文件夹 ('n') 将自动把 `data`, `resumes`, `zips` 中的旧文件移动 to `archive_YYYYMMDD_HHMMSS` 子文件夹中，而非保留在原处。
    2. **智能查重**: 程序启动时会自动加载 `data` 目录（含归档文件夹）下的所有历史 Excel 数据。在搜索过程中，若发现姓名、职位、在职时间完全匹配的候选人，将自动跳过，避免重复抓取。
    3. **Git优化**: 更新 `.gitignore` 忽略 `.xlsx` 和 `.numbers` 文件，并从版本控制中移除已误传的文件。
    4. **代码重构**: 将 `main.py` 重构为 `LiepinScraper` 类，消除全局变量；修复 `time.sleep` 阻塞异步循环的问题。
    5. **安全升级**: 将 API 密钥移至 `.env` 文件，防止意外泄露。
    6. **性能优化**: 调整查重逻辑顺序，在调用 AI API 之前先进行本地查重，节省 API 额度。
- **2026-01-05**:
    1. **视觉优化**: 调整 Excel 表格列顺序，将“姓名”前移至“公司”之后，使表格信息展示更顺畅。
    2. **逻辑保障**: 确认列顺序调整不会影响历史数据加载及查重逻辑，系统保持基于列名的精准匹配。
    3. **输入优化**: 将目标职位的默认值从“产品经理”改为“空”，若用户直接回车则不限制职位搜索。
    4. **交互优化**: 将职位输入的分隔符从 `/` 改为 `-`。
    5. **自动化命名**: 实现 Excel 文件名自动根据分类、公司、职位生成默认值，格式为 `分类-公司-职位.xlsx`。